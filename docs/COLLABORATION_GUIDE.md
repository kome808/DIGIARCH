# 數位典藏系統 - 團隊協同合作指南

本文件旨在規範本專案（DIGIARCH）開發團隊的協作流程。團隊由 1 位專案主導者與 2 位 UX 設計師組成，利用 Antigravity (AI) 與 GitHub 進行高效協作。

---

## 👥 團隊角色與分工

### 1. 專案主導者 (Project Lead) - @kome808
*   **系統總控與資料庫管理**：**唯一授權**在 Supabase 執行 SQL 指令的人。負責維護 `digi` Schema 與系統安全性。
*   **技術審查 (Review)**：負責合併設計師的 Pull Request，確保系統穩定與全域風格統一。
*   **環境部署**：管理 Vercel 部署設定。

### 2. UX 設計師 (UX Designers)
*   **功能與模組開發**：負責個別功能頁面 (UI) 與業務邏輯實作。
*   **模組隔離**：確保開發的程式碼都存放在自己的模組夾內，互不干擾。
*   **資料庫需求**：若需異動資料庫，需透過 SQL 請求流程向主導者提出。

---

## 🤖 Antigravity 自動化指令 (Shortcuts)

為了極簡化協作，我們封裝了自動化工作流。設計師只需對 AI 輸入以下指令：

| 您的需求 | 對 Antigravity **輸入指令** | AI 執行的行為 |
| :--- | :--- | :--- |
| **開新任務** | `/start-feature [任務標題]` | 自動建立分支、建立開發資料夾 |
| **儲存並上傳** | 「**更新到 Git**」 | 自動執行 `add`, `commit`, `push` |
| **載入最新** | 「**載入最新程式**」 | 自動同步主線 `main` 的代碼 |
| **同步資料庫** | `/sync-db` | **(主導者專用)** 自動匯總所有待執行的 SQL |
| **規格書測試** | `/spec-to-test [模組名稱]` | 依規格書生成測試並執行 |

---

## 🌿 協作核心：一任務一分支

為了確保程式碼乾淨且不打結，我們採用「一個任務一條路」：

1.  **開工**：輸入 `/start-feature [任務名稱]`。
2.  **開發**：在該分支中盡情實作。AI 會自動確保 Code 放在正確的位置。
3.  **上傳**：開發一段落或完工時，對 AI 說「更新到 Git」。
4.  **合併**：到 GitHub 網站點選 **Pull Request**，交由主導者進行合併。

> [!IMPORTANT]
> **重要規則**：
> - 每天開工先對 AI 說：「**載入最新程式**」。
> - **不同模組務必分開分支**，禁止多人同時在 main 或同一個分支修改。

---

## 💾 資料庫變更流程 (SQL Workflow)

由於僅限主導者可以操作 Supabase，我們採用「**SQL 待辦清單**」機制：

1.  **提交請求**：設計師若需變更，請 AI 將 SQL 代碼產出在 `database/migrations/ready-to-apply/` 下的新檔案中。
2.  **批次執行**：主導者只需對 AI 下指令 `/sync-db`。
3.  **歸檔同步**：AI 會匯總所有 SQL 給主導者執行，執行成功後會自動將檔案移至 `applied/` 區，並更新總表。

---

## 📦 模組化與代碼隔離規範

為了讓多人協作互不影響，請嚴格遵守目錄結構：

*   **頁面程式**：`src/pages/[模組名稱]/...`
*   **資料邏輯**：`src/services/[模組名稱]/...`
*   **資料存取**：`src/repositories/[模組名稱]/...`

> [!TIP]
> 請 AI 建立新檔案時記得強調：「**請把這模組的所有檔案都放在專屬的資料夾內，不要動到其他模組或全域設定。**」

---

## 🎨 視覺開發規範 (Vuexy Style)

1.  **字體**：統一使用 **Montserrat** (400/500/600/700)。
2.  **主色彩**：動作連結統一使用 `--color-primary` (`#7367F0`)。
3.  **佈局**：內容區域請使用 `bg-[#F8F7FA]` 背景，卡片使用 `bg-white` 搭配細微陰影。
4.  **圖示**：統一使用 `lucide-react`。

---

## 📱 響應式與無障礙規範 (RWD & A11y)

所有功能開發**必須**符合以下標準，不符合者無法合併：

### 1. 響應式設計 (RWD)
*   **Mobile Support**：所有頁面必須在手機 (375px+) 上可正常操作。
*   **Grid System**：使用 Tailwind Grid/Flex 佈局，避免寫死寬度 (Fixed Width)。
*   **Touch Friendly**：手機版按鈕點擊區域至少 **44x44px**。

### 2. 無障礙設計 (A11y)
*   **Semantic HTML**：必須使用語意化標籤 (如 `<article>`, `<section>`, `<button>` 而非 `<div>`)。
*   **ARIA 標籤**：所有**圖示按鈕**必須加上 `aria-label` 說明（例如：搜尋、選單）。
*   **鍵盤導航**：確保所有互動元素皆可透過 `Tab` 鍵聚焦 (Focusable) 並操作。
*   **裝飾隱藏**：純裝飾圖示請加上 `aria-hidden="true"`。

---

## 📝 規格書驅動開發 (Spec-Driven Development)

**每個功能模組開發前，必須先撰寫規格書**，確保需求明確、測試有依據。

### 規格書位置
- 範本：`docs/specs/_TEMPLATE.md`
- 實際規格書：`docs/specs/[模組名稱]-spec.md`

### 開發流程
1. **撰寫規格書**：依照範本填寫 Section 1-7
2. **Review**：由主導者或團隊成員確認規格無誤
3. **開發實作**：依據規格書 Section 3 (規則) 開發
4. **自動化測試**：輸入 `/spec-to-test [模組名稱]` 生成並執行測試
5. **驗收**：所有測試案例通過後，提交 Pull Request

### 測試指令
```bash
npm run test              # 執行所有測試
npm run test:ui           # 開啟測試介面
npm run test:report       # 查看測試報告
```

---

## ✅ 完成檢查清單 (Definition of Done)

*   [ ] **已撰寫規格書** (`docs/specs/[模組]-spec.md`)
*   [ ] 介面在預覽中符合專業 UX 設計感
*   [ ] 響應式 (RWD) 手機版可正常操作
*   [ ] 無障礙 (A11y) 標籤正確標註
*   [ ] 使用 Lucide 圖示且縮放比例正確
*   [ ] 路由導向與選單連結正確生效
*   [ ] 資料存取透過 Repository 層處理
*   [ ] `/spec-to-test` **自動化測試全部通過**
*   [ ] `npm run build` 通過，無錯誤
*   [ ] 程式碼已 Push 至分支

---

**凌網科技 UX 部門 - 數位典藏系統開發團隊**  
*最後更新：2026.01.09*
